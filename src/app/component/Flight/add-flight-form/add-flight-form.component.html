<div class = 'flight_form'>
  <h3>Add new flight</h3>
  <form [formGroup]="flightForm">
    <div>
      <label>
        Departure Airport
      </label>
      <input id="DepartureAirport" type="text" formControlName="Departure_Airport">
      <div class="error_msg">
        <small *ngIf="flightForm.get('Departure_Airport')?.errors?.['pattern'] != null && flightForm.get('Departure_Airport')?.touched">
          Departure Airport cannot have numbers
        </small>
        <br>
        <small *ngIf="flightForm.get('Departure_Airport')?.errors?.['required'] && flightForm.get('Departure_Airport')?.touched">
          Departure Airport cannot be empty
        </small>
      </div>
    </div>

    <br>

    <label>
      Arrival Airport
    </label>
    <input id="ArrivalAirport" type="text" formControlName="Arrival_Airport">
    <div class="error_msg">
      <small *ngIf="flightForm.get('Arrival_Airport')?.errors?.['pattern'] != null && flightForm.get('Arrival_Airport')?.touched">
        Arrival Airport cannot have numbers
      </small>
      <small *ngIf="flightForm.get('Arrival_Airport')?.errors?.['required'] && flightForm.get('Arrival_Airport')?.touched">
        Arrival Airport cannot be empty
      </small>
      <br>
      <small *ngIf="flightForm.errors?.['equalDestination']  && !flightForm.get('Arrival_Airport')?.untouched">
        Departure and Arrival cannot be the same
      </small>
    </div>
    <br>
    <label>
      Flight
    </label>
    <input id="FlightNo" type="text" formControlName="FlightNo">
    <div class="error_msg">
      <small *ngIf="flightForm.get('FlightNo')?.errors?.['required'] && flightForm.get('FlightNo')?.touched">
        Flight number should b
      </small>
      <br>
      <small *ngIf="(flightForm.get('FlightNo')?.errors?.['pattern'] &&  flightForm.get('FlightNo')?.errors?.['pattern'] != null && flightForm.get('FlightNo')?.touched)">
        Flight number should be in the format of XXxxxx. X - Letters, x- numbers
      </small>
    </div>
    <br>
    <label>
      Departure date and time
    </label>
    <input id="DepartDate" type="datetime-local" formControlName="Departure_Time">
    <div class="error_msg">
      <small *ngIf="flightForm.get('Departure_Time')?.errors?.['required'] && flightForm.get('Departure_Time')?.touched">
        Departure_time required
      </small>
      <br>
      <small *ngIf="flightForm.errors?.['dateMismatch'] && flightForm.get('Departure_Time')?.touched">
        Please fill with a future date
      </small>
    </div>
    <br>
    <label>
      Arrival date and time
    </label>
    <input id="ArriveDate" type="datetime-local" formControlName="Arrival_Time">
    <div class="error_msg">
      <small *ngIf="flightForm.get('Arrival_Time')?.errors?.['required'] && flightForm.get('Arrival_Time')?.touched">
        Departure_time required
      </small>
      <br>
      <small *ngIf="flightForm.errors?.['durationError'] && flightForm.get('Arrival_Time')?.touched">
        Arrival date should be later than departure date
      </small>
    </div>
    <br>

    <button type="reset" (click)="close()">
      Cancel
    </button>
    <button type="reset" (click)="reset()">
      Reset
    </button>
    <button *ngIf="this.data.row ==''" type="submit" (click)="onSubmit()" [disabled]="!flightForm.valid">
      Submit
    </button>
    <button  *ngIf="this.data.row !=''" type="submit" (click)="update()" [disabled]="!flightForm.valid">
      Update
    </button>
  </form>
</div>
